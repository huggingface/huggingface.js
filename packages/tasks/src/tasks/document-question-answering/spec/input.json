{
	"$id": "/inference/schemas/document-question-answering/input.json",
	"$schema": "http://json-schema.org/draft-06/schema#",
	"description": "Inputs for Document Question Answering inference",
	"type": "object",
	"properties": {
		"inputs": {
			"description": "One or several document+question pairs to answer",
			"anyOf": [
				{
					"$ref": "#/$defs/DocumentAndQuestion"
				},
				{
					"type": "array",
					"items": {
						"$ref": "#/$defs/DocumentAndQuestion"
					}
				}
			]
		},
		"parameters": {
			"description": "Additional inference parameters",
			"$ref": "#/$defs/DocumentQuestionAnsweringParameters"
		}
	},
	"$defs": {
		"DocumentQuestionAnsweringParameters": {
			"title": "DocumentQuestionAnsweringParameters",
			"description": "Additional inference parameters for Document Question Answering",
			"type": "object",
			"properties": {
				"docStride": {
					"type": "integer",
					"description": "If the words in the document are too long to fit with the question for the model, it will be split in several chunks with some overlap. This argument controls the size of that overlap."
				},
				"handleImpossibleAnswer": {
					"type": "boolean",
					"description": "Whether to accept impossible as an answer"
				},
				"lang": {
					"type": "string",
					"description": "Language to use while running OCR. Defaults to english."
				},
				"maxAnswerLen": {
					"type": "integer",
					"description": "The maximum length of predicted answers (e.g., only answers with a shorter length are considered)."
				},
				"maxSeqLen": {
					"type": "integer",
					"description": "The maximum length of the total sentence (context + question) in tokens of each chunk passed to the model. The context will be split in several chunks (using doc_stride as overlap) if needed."
				},
				"maxQuestionLen": {
					"type": "integer",
					"description": "The maximum length of the question after tokenization. It will be truncated if needed."
				},
				"topK": {
					"type": "integer",
					"description": "The number of answers to return (will be chosen by order of likelihood). Can return less than top_k answers if there are not enough options available within the context."
				},
				"wordBoxes": {
					"type": "array",
					"description": "A list of words and bounding boxes (normalized 0->1000). If provided, the inference will skip the OCR step and use the provided bounding boxes instead.",
					"items": {
						"anyOf": [
							{
								"type": "string"
							},
							{
								"type": "array",
								"items": {
									"type": "number"
								},
								"maxLength": 4,
								"minLength": 4
							}
						]
					}
				}
			}
		},
		"DocumentAndQuestion": {
			"type": "object",
			"properties": {
				"image": {
					"description": "The image on which the question is asked"
				},
				"question": {
					"type": "string",
					"description": "A question to ask of the document"
				}
			}
		}
	},
	"required": ["inputs"]
}
